{% extends 'base_with_navigation.html' %}

{% load staticfiles %}
{% block js %}
<script src={% static 'file_storage/jquery.form.min.js' %}></script>
<script src={% static 'file_storage/md5.js' %}></script>
<script src={% static 'file_storage/hashme.js' %}></script>
<script src={% static 'file_storage/create_message.js' %}></script>
{% endblock %}

{% block content %}
	<div id="show_file_list">
		<p>Uploaded File</p>
			{% for file_pointer in message.file_pointers.all %}
				<div id="file_pointer">
					<p>{{file_pointer.name}}
					<a href="{% url 'delete_file_pointer_from_message' file_pointer_id=file_pointer.id %}?next={{request.get_full_path|urlencode}}">Remove</a>
					</p>
				</div>
			{% empty %}
				<p>There's no uploaded file</p>
			{% endfor %}
	</div>

	<div id="file_upload">
		<form enctype="multipart/form-data" method="post" action={% url 'create_message_page' message_id=message.id %}>
			{{form_file_upload.as_p}}
			<input type="submit" name="file_upload_submit" value="Submit" />
		</form>	
	</div>
	<div id="post_message">
		<p>Message Infomation</p>
		<form method="post" action={% url 'create_message_page' message_id=message.id %}>
			{{form_post_message.as_p}}
			{{form_select_project.as_p}}
			<input type="submit" name="post_message_submit" value="Post" />
			<a href={% url 'delete_message' message_id=message.id %}>Delete Message</a>
		</form>	
	</div>

{% endblock %}
